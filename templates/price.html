{% extends 'base.html' %}

{% block body %}
<div class="container mt-4">
    <h1 class="text-center mb-4">–ò–Ω—Ñ–ª—è—Ü–∏—è –≤ –†–æ—Å—Å–∏–∏</h1>

    <div class="card shadow-sm mb-4 bg-secondary text-light">
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label class="form-label">–§–∞–π–ª CSV —Å –∏–Ω—Ñ–ª—è—Ü–∏–µ–π</label>
                    <input type="file" name="datafile" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">–ü—Ä–æ–≥–Ω–æ–∑ (–ª–µ—Ç)</label>
                    <input type="number" name="period" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label class="form-label">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞ (—Å–µ–π—á–∞—Å, ‚ÇΩ)</label>
                    <input type="number" name="price" class="form-control" step="0.01" required>
                </div>
                <button type="submit" class="btn btn-danger">–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</button>
            </form>
        </div>
    </div>

    {% if chart_url %}
        <h3 class="text-center mt-4">–ì—Ä–∞—Ñ–∏–∫ –∏–Ω—Ñ–ª—è—Ü–∏–∏</h3>
        <div class="text-center">
            <img src="{{ chart_url }}" class="img-fluid rounded shadow border border-light">
        </div>
    {% endif %}

    {% if future_price %}
        <h4 class="mt-4">–ë—É–¥—É—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–∞: <strong>{{ future_price }} ‚ÇΩ</strong></h4>
    {% endif %}

    {% if result %}
        <h4 class="mt-3">–ê–Ω–∞–ª–∏–∑</h4>
        <ul class="list-group mb-3">
            <li class="list-group-item bg-dark text-light">üìà –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç: {{ result.max_gain[1] | round(2) }}% –≤ {{ result.max_gain[0] }}</li>
            <li class="list-group-item bg-dark text-light">üìâ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ: {{ result.max_loss[1] | round(2) }}% –≤ {{ result.max_loss[0] }}</li>
        </ul>
    {% endif %}

    {% if table_data %}
        <h4 class="mt-3">–î–∞–Ω–Ω—ã–µ</h4>
        <div class="table-responsive">
            <table class="table table-dark table-striped table-bordered table-hover">
                <thead class="table-secondary text-dark">
                    <tr>
                        <th>–ì–æ–¥</th>
                        <th>–ò–Ω—Ñ–ª—è—Ü–∏—è (%)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in table_data %}
                        <tr>
                            <td>{{ row['Year'] }}</td>
                            <td>{{ row['Inflation'] }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% endif %}
</div>
{% endblock %}
